# Comparative analysis of cancer immune infiltration {#results}



*Selected content of this chapter is a part of a publication in preparation*

## Background 



## Methods 

### Data sources

**Bulk datasets**



**Single cell datasets**


### The DeconICA pipeline on bulk



Labeling components 

post Data cleaning 

### The DeconICA pipeline on single cell



## Results 

Global image with 

## Discussion

## Conclussions 


## Supplementary

### Tables 
```{r bulklistimport, include=FALSE}
library(readr)
datasets_sources_phd <- data.frame(read_delim("RData/datasets_sources.csv",";", escape_double = FALSE, trim_ws = TRUE))
datasets_sources_phd$Cancer.type <- as.factor(datasets_sources_phd$Cancer.type)

```
```{r bulklist, echo = FALSE}
if(is_html_output()){
cat("<table>",paste0("<caption>", "(#tab:bulklist)","<b>", "Caption","</b>", "</caption>"),"</table>", sep ="\n")
library(DT)
sources_bulk <- datatable(datasets_sources_phd, filter = 'top', options = list(
  columnDefs = list(list(width="10em", targets=list(1, 2,5)), list(width = '5em', targets = list(4,6))),
  pageLength = 20,
  autoWidth = TRUE,
  scrollX=TRUE),
  rownames = FALSE,
width = '100%',
caption = NULL,
escape = FALSE
)
sources_bulk
} else {
library(kableExtra)
kable(datasets_sources_phd, format="latex",row.names = FALSE, align = 'c', booktabs = TRUE , longtable = TRUE, 
      caption='(ref:bulklist-caption)', escape =TRUE, caption.short = "List of datasets") %>%
    kable_styling(latex_options= c("striped","repeat_header"), full_width =FALSE, font_size = 7, position= "left")  %>%
  column_spec(c(2,7,8,9), width = "8em") %>%  column_spec(c(1,3,4,5,6), width = "3em")
}
```


(ref:bulklist-caption) **Some capiton**.


```{r sclistimport, include=FALSE}
library(readr)
sc_phd <- data.frame(read_delim("RData/single_cell_src.csv",";", escape_double = FALSE, trim_ws = TRUE))
```
```{r sclist, echo = FALSE}
if(is_html_output()){
cat("<table>",paste0("<caption>", "(#tab:sclist)","<b>", "Caption","</b>", "</caption>"),"</table>", sep ="\n")
library(DT)
sources_sc <- datatable(sc_phd, filter = 'top', options = list(
  #columnDefs = list(list(width="10em", targets=list(1, 2,5)), list(width = '5em', targets = list(4,6))),
  pageLength = 20,
  autoWidth = TRUE,
  scrollX=TRUE),
  rownames = FALSE,
width = '100%',
caption = NULL,
escape = FALSE
)
sources_sc 
} else {

  library(kableExtra)
  kable(
    sc_phd,
    format = "latex",
    row.names = FALSE,
    align = 'c',
    booktabs = T,
    caption = '(ref:sclist-caption)',
    escape = TRUE,
    longtable = TRUE,
    caption.short = "List of datasets 2"
    ) %>% kable_styling(latex_options= c("striped"), full_width =F, font_size = 6 ) %>% landscape()
  #%>%
  #   kable_styling(
  #     latex_options = c("striped", "scale_down"),
  #     full_width = FALSE
  #   ) 
} 
```

(ref:sclist-caption) azez